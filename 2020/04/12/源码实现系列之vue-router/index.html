<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>æºç å®ç°ç³»åˆ—ä¹‹vue-router - atie&#39;s blog</title>


    <meta name="description" content="è¿™ä¸ªæœˆä¼šå®ç°ä¸€ä¸‹Vue, Vuex, vue-routerã€‚æˆ‘ä¼šä»¥å€’æ¨çš„æ¨¡å¼è¾¹å¼€å‘è¾¹å†™æ–‡ç« ã€‚è¯ä¸å¤šè¯´å¼€å§‹è·Ÿç€æˆ‘ä¸€èµ·æ’¸ã€‚ä»“åº“åœ°å€  æœ¬æ–‡åªæ˜¯å®ç°äº†ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„vue-router.æœ¬æ–‡æ‰€å†™çš„ä»£ç ï¼Œä¸ä¼šæ¯ä¸ªåœ°æ–¹éƒ½åšå¼‚å¸¸åˆ¤æ–­ã€‚å®ç°ä¸€ä¸ªèƒ½å¤Ÿä½“ç°vue-routeræ ¸å¿ƒé€»è¾‘å³å¯ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="æºç å®ç°ç³»åˆ—ä¹‹vue-router">
<meta property="og:url" content="http://zhouatie.github.io/blog/2020/04/12/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8Bvue-router/index.html">
<meta property="og:site_name" content="atie&#39;s blog">
<meta property="og:description" content="è¿™ä¸ªæœˆä¼šå®ç°ä¸€ä¸‹Vue, Vuex, vue-routerã€‚æˆ‘ä¼šä»¥å€’æ¨çš„æ¨¡å¼è¾¹å¼€å‘è¾¹å†™æ–‡ç« ã€‚è¯ä¸å¤šè¯´å¼€å§‹è·Ÿç€æˆ‘ä¸€èµ·æ’¸ã€‚ä»“åº“åœ°å€  æœ¬æ–‡åªæ˜¯å®ç°äº†ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„vue-router.æœ¬æ–‡æ‰€å†™çš„ä»£ç ï¼Œä¸ä¼šæ¯ä¸ªåœ°æ–¹éƒ½åšå¼‚å¸¸åˆ¤æ–­ã€‚å®ç°ä¸€ä¸ªèƒ½å¤Ÿä½“ç°vue-routeræ ¸å¿ƒé€»è¾‘å³å¯ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://zhouatie.github.io/blog/images/og_image.png">
<meta property="article:published_time" content="2020-04-11T18:49:23.000Z">
<meta property="article:modified_time" content="2020-05-05T07:57:27.827Z">
<meta property="article:author" content="zhouatie">
<meta property="article:tag" content="æºç å®ç°">
<meta property="article:tag" content="vue-router">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zhouatie.github.io/blog/images/og_image.png">







<link rel="icon" href="/blog/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/blog/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/blog/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    


<link rel="stylesheet" href="/blog/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/blog/">
            
                <img src="/blog/images/logo.svg" alt="æºç å®ç°ç³»åˆ—ä¹‹vue-router" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/blog/">ä¸»é¡µ</a>
                
                <a class="navbar-item"
                href="/blog/archives">å½’æ¡£</a>
                
                <a class="navbar-item"
                href="/blog/categories">åˆ†ç±»</a>
                
                <a class="navbar-item"
                href="/blog/tags">æ ‡ç­¾</a>
                
                <a class="navbar-item"
                href="/blog/about">å…³äº</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhouatie">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="æœç´¢" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-04-11T18:49:23.000Z">2020-04-12</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    28 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 4164 ä¸ªå­—)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span>æ¬¡è®¿é—®
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                æºç å®ç°ç³»åˆ—ä¹‹vue-router
            
        </h1>
        <div class="content">
            <p>è¿™ä¸ªæœˆä¼šå®ç°ä¸€ä¸‹<code>Vue</code>, <code>Vuex</code>, <code>vue-router</code>ã€‚æˆ‘ä¼šä»¥<strong>å€’æ¨</strong>çš„æ¨¡å¼è¾¹å¼€å‘è¾¹å†™æ–‡ç« ã€‚è¯ä¸å¤šè¯´å¼€å§‹è·Ÿç€æˆ‘ä¸€èµ·æ’¸ã€‚<a href="https://github.com/zhouatie/front-end/tree/master/analysis-vue-router">ä»“åº“åœ°å€</a></p>
<blockquote>
<p>æœ¬æ–‡åªæ˜¯å®ç°äº†ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„<code>vue-router</code>.æœ¬æ–‡æ‰€å†™çš„ä»£ç ï¼Œä¸ä¼šæ¯ä¸ªåœ°æ–¹éƒ½åšå¼‚å¸¸åˆ¤æ–­ã€‚å®ç°ä¸€ä¸ªèƒ½å¤Ÿä½“ç°<code>vue-router</code>æ ¸å¿ƒé€»è¾‘å³å¯ã€‚</p>
</blockquote>
<a id="more"></a>

<p>æˆ‘å¤§è‡´æ‹äº†ä¸‹<code>vue-router</code>çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š<br><img src="https://s1.ax1x.com/2020/05/03/JxW5TS.png" alt="vue-routeræ€ç»´å¯¼å›¾"></p>
<p>åœ¨å†™æºç ä¹‹å‰ï¼Œæˆ‘å…ˆå±•ç¤ºä¸‹<code>routes</code>çš„æ•°æ®ç»“æ„ï¼Œåœ¨æ ¹æ®è¿™ä¸ªæ•°æ®ç»“æ„æ¥è¿›è¡Œ<code>vue-router</code>çš„å¼€å‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'Home'</span>,</span><br><span class="line">    component: Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/about'</span>,</span><br><span class="line">    name: <span class="string">'About'</span>,</span><br><span class="line">    component: <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">      <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "about" */</span> <span class="string">'../views/About.vue'</span>),</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'a'</span>,</span><br><span class="line">        name: <span class="string">'about.a'</span>,</span><br><span class="line">        component: &#123;</span><br><span class="line">          render: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'b'</span>,</span><br><span class="line">        name: <span class="string">'about.b'</span>,</span><br><span class="line">        component: &#123;</span><br><span class="line">          render: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is b<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…-install"><a href="#å®‰è£…-install" class="headerlink" title="å®‰è£… install"></a>å®‰è£… install</h2><p>å›å¿†ä¸‹æˆ‘ä»¬å¹³æ—¶ä»£ç é‡Œç”¨åˆ°<code>vue-router</code>å¿…å®šä¼šæœ‰çš„ä¸¤è¡Œä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter);</span><br></pre></td></tr></table></figure>

<p><code>Vue</code>åœ¨<code>use</code> <code>VueRouter</code>çš„æ—¶å€™ä¼šè°ƒç”¨<code>VueRouter</code>çš„<code>install</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥<code>Vue</code>æ„é€ å‡½æ•°ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥ç¬¬ä¸€æ­¥å°±æ˜¯åˆ›å»ºä¸€ä¸ª<code>VueRouter</code>æ„é€ å‡½æ•°ï¼Œå¹¶å®ç°ä¸€ä¸ª<code>install</code>æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue-router/index.js</span></span><br><span class="line"><span class="keyword">const</span> install = <span class="function">(<span class="params">Vue</span>) =&gt;</span> &#123;</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.$options.router) &#123;</span><br><span class="line">        <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>._router = <span class="keyword">this</span>.$options.router;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span>.$parent &amp;&amp; <span class="keyword">this</span>.$parent._routerRoot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// <span class="doctag">FIXME:</span></span></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$route'</span>, &#123;</span><br><span class="line">    <span class="keyword">get</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'this is $route'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$router'</span>, &#123;</span><br><span class="line">    <span class="keyword">get</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._router;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// <span class="doctag">FIXME:</span></span></span><br><span class="line">  Vue.component(<span class="string">'router-view'</span>, &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is router-view<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// <span class="doctag">FIXME:</span></span></span><br><span class="line">  Vue.component(<span class="string">'router-link'</span>, &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is router-link<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> install;</span><br></pre></td></tr></table></figure>

<p><code>vue-router</code>ä¹Ÿä¼šä¸<code>vuex</code>ä¸€æ ·ï¼Œé€šè¿‡<code>Vue.mixin</code>æ–¹æ³•æ·»åŠ <code>beforeCreate</code>ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå‘æ¯ä¸ªç»„ä»¶å®ä¾‹æŒ‚è½½<code>_routerRoot</code>æ ¹å®ä¾‹å¯¹è±¡ï¼Œæ ¹å®ä¾‹ä¼šå¤šæŒ‚è½½ä¸€ä¸ª<code>_router</code>å¯¹è±¡ï¼Œè¿™æ ·å­ç»„ä»¶å°±å¯ä»¥é€šè¿‡<code>_routerRoot._router</code>æ¥è·å–è·¯ç”±å®ä¾‹å¯¹è±¡äº†ã€‚åŒæ—¶ä¼šå¾€<code>Vue.prototype</code>ä¸ŠæŒ‚è½½<code>$router</code> <code>$route</code>ï¼Œæ–¹ä¾¿æ¯ä¸ªå­ç»„ä»¶è·å–ã€‚</p>
<p>å¹¶æŒ‚è½½å…¨å±€ç»„ä»¶<code>router-view</code>ã€<code>router-link</code>ç»„ä»¶;</p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>å†™å®Œ<code>install</code>æ–¹æ³•åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¼€å§‹åŠ¨æ‰‹<code>VueRouter</code>ã€‚åˆå§‹åŒ–æ—¶ï¼Œè¯¥åœ¨<code>constructor</code>ä¸­å†™äº›ä»€ä¹ˆå‘¢ï¼Ÿåˆå§‹åŒ–å½“ç„¶æ˜¯ä¸ºäº†åç»­çš„ä¸€äº›æ–¹æ³•åšå‡†å¤‡äº†ã€‚ä»–å°†åŒ…å«ä»¥ä¸‹å‡ ç‚¹</p>
<ul>
<li>åˆ›å»º<code>matcher</code>å¯¹è±¡<ul>
<li><code>addRoute</code>: ç”¨äºåŠ¨æ€æ·»åŠ è·¯ç”±</li>
<li><code>match</code>: é‡ä¸­ä¹‹é‡ï¼Œç”¨äºæ ¹æ®<code>path</code>åŒ¹é…å‡ºå¯¹åº”çš„<code>route</code>å¯¹è±¡ï¼Œç”¨äº<code>router-view</code>çš„æ¸²æŸ“</li>
</ul>
</li>
<li>æ ¹æ®å¯¹åº”çš„<code>mode</code>åˆ›å»ºå¯¹åº”çš„<code>history</code>å¯¹è±¡ï¼ˆæˆ‘è¿™é‡Œå¼€å‘çš„<code>router</code>é»˜è®¤ä½¿ç”¨<code>HashHistory</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="keyword">this</span>.matcher = createMatcher(options.routes);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.history = <span class="keyword">new</span> HashHistory();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  init() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="createMatcher"><a href="#createMatcher" class="headerlink" title="createMatcher"></a>createMatcher</h3><p>é‚£ä¹ˆ<code>createMatcher</code>åˆ°åº•è¯¥æ€ä¹ˆå®ç°ï¼Ÿè¿˜æ˜¯åæ¨çš„æ¨¡å¼ï¼Œå®ƒè‚¯å®šè¿”å›ä¸Šé¢åˆ—çš„ä¸¤ä¸ªæ–¹æ³•<code>addRoute</code> <code>match</code>æ–¹æ³•ã€‚é‚£ä¹ˆå°±å…ˆå®ç°ä¸‹å¤§è‡´çš„æ ·å­å§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-matcher.js</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMatcher</span>(<span class="params">routes</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addRoute</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">match</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    addRoute,</span><br><span class="line">    match,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createMatcher;</span><br></pre></td></tr></table></figure>

<h4 id="match"><a href="#match" class="headerlink" title="match"></a>match</h4><p>æ¥ä¸‹æ¥å°±æ˜¯å®ç°<code>match</code>æ–¹æ³•äº†ã€‚å‰é¢è¯´è¿‡<code>match</code>æ˜¯ç”¨æ¥åŒ¹é…<code>path</code>æ‰€å¯¹åº”çš„<code>route</code>å¯¹è±¡ã€‚æ‰€ä»¥ä»–è‚¯å®šæœ‰ä¸ª<code>path</code>å‚æ•°ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªè·¯ç”±æ˜ å°„è¡¨æ¥ç­›é€‰å‡ºå¯¹åº”çš„<code>route</code>å¯¹è±¡ã€‚é‚£å°±å¼€å§‹ç€æ‰‹ç¼–ç å§ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-matcher.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">match</span>(<span class="params">location</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> routeMap[location]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™ä½ è‚¯å®šä¼šæœ‰ä¸ªç–‘æƒ‘ï¼Œè¿™ä¸ª<code>routeMap</code>å“ªé‡Œæ¥çš„å‘¢ï¼Ÿä¸Šé¢æˆ‘å·²ç»è¯´è¿‡<code>routeMap</code>æ˜¯ä¸€ä¸ªè·¯ç”±æ˜ å°„è¡¨ã€‚é‚£å°±å¼€å§‹ç€æ‰‹ç¼–ç å§ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-matcher.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMatcher</span>(<span class="params">routes</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; pathList, pathMap &#125; = createRouteMap(routes);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addRoute</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">match</span>(<span class="params">locaiton</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> routeMap[locaiton];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    addRoute,</span><br><span class="line">    match,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>match</code>æ–¹æ³•ä¸­å¹¶ä¸ä¼šé‚£ä¹ˆç®€å•çš„è¿”å›<code>route</code>å¯¹è±¡å°±okäº†ã€‚è‚¯å®šæ˜¯ç»è¿‡ä¸€ä¸ªå‡½æ•°ä¿è¯è¿‡è¿”å›<code>matched</code> <code>path</code>ç­‰å­—æ®µã€‚è¿™é‡Œå…ˆå¿½ç•¥ï¼Œç­‰è®²åˆ°<code>history</code>çš„æ—¶å€™å†è®²è§£ã€‚</p>
<h5 id="createRouteMap"><a href="#createRouteMap" class="headerlink" title="createRouteMap"></a>createRouteMap</h5><p>ä½ å¯ä»¥çœ‹åˆ°ä»£ç ä¸­è°ƒç”¨äº†<code>createRouteMap</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬å·²çŸ¥è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥åˆ›å»º<code>routeMap</code>çš„ï¼Œé‚£ä¹ˆå…ˆæ­ä¸€ä¸ªå¤§è‡´çš„å‡½æ•°æ¡†æ¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-route-map.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRouteMap</span>(<span class="params">routes</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> pathList = [];</span><br><span class="line">  <span class="keyword">const</span> pathMap = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    pathList,</span><br><span class="line">    pathMap,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createRouteMap;</span><br></pre></td></tr></table></figure>

<p>å¤§è‡´ä¼šæ˜¯è¿™ä¸ªæ ·å­ã€‚æ‰§è¡Œè¿”å›è·¯ç”±æ˜ å°„è¡¨ã€‚é‚£ä¹ˆè¯¥æ€ä¹ˆåˆ›å»º<code>pathList</code> <code>pathMap</code>å¯¹è±¡å‘¢ï¼Ÿå½“ç„¶ç”¨ä¼ å…¥çš„<code>routes</code>æ¥æ„é€ äº†ã€‚é‚£å°±å¼€å§‹ç€æ‰‹ç¼–ç å§ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-route-map.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRouteMap</span>(<span class="params">routes</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> pathList = [];</span><br><span class="line">  <span class="keyword">const</span> pathMap = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  routes.forEach(<span class="function"><span class="params">route</span> =&gt;</span> &#123;</span><br><span class="line">    addRouteRecord(route, pathList, pathMap)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    pathList,</span><br><span class="line">    pathMap,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addRouteRecord</span> (<span class="params">route, pathList, pathMap</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> path = route.path</span><br><span class="line">  <span class="keyword">const</span> record = &#123;</span><br><span class="line">    path,</span><br><span class="line">    component: route.component</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!pathList.includes(path)) &#123;</span><br><span class="line">    pathList.push(path)</span><br><span class="line">    pathMap[path] = record</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createRouteMap;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æˆ‘é€šè¿‡éå†<code>routes</code>ï¼Œè°ƒç”¨<code>addRouteRecord</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥<code>route</code>ã€‚<code>addRouteRecord</code>æ ¹æ®ä¼ å…¥çš„<code>route</code>æ„å»º<code>pathList</code> <code>pathMap</code>ï¼Œæˆ‘æƒ³å¤§å®¶çœ‹ä»£ç åº”è¯¥å°±ç†è§£è¿™æ®µä»£ç æ˜¯ä»€ä¹ˆæ„æ€äº†ã€‚å½“ç„¶ä¸Šé¢åªæ˜¯éå¸¸éå¸¸åŸºç¡€ç‰ˆæœ¬çš„ã€‚è¿˜æœ‰ä¸€äº›åœºæ™¯æ²¡è€ƒè™‘åˆ°ï¼Œæ¯”å¦‚ä¼ å…¥çš„<code>route</code>å¯¹è±¡è¿˜æœ‰<code>children</code>,å°±éœ€è¦ç»§ç»­éå†ä»–çš„<code>children</code>å¹¶è°ƒç”¨<code>addRouteRecord</code>æ–¹æ³•ã€‚é‚£å°±å¼€å§‹ç€æ‰‹ç¼–ç å§ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-route-map.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addRouteRecord</span>(<span class="params">route, pathList, pathMap, parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> path = parent ? <span class="string">`<span class="subst">$&#123;parent.path&#125;</span>/<span class="subst">$&#123;route.path&#125;</span>`</span> : route.path;</span><br><span class="line">  <span class="keyword">const</span> record = &#123;</span><br><span class="line">    path,</span><br><span class="line">    component: route.component,</span><br><span class="line">    parent,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (!pathList.includes(path)) &#123;</span><br><span class="line">    pathList.push(path);</span><br><span class="line">    pathMap[path] = record;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (route.children) &#123;</span><br><span class="line">    route.children.forEach(<span class="function">(<span class="params">o</span>) =&gt;</span> &#123;</span><br><span class="line">      addRouteRecord(o, pathList, pathMap, record);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šå‘ç°<code>addRouteRecord</code>å¤šäº†ä¸ª<code>parent</code>å‚æ•°ï¼Œæ˜¯å› ä¸ºæœ‰å­è·¯ç”±ã€‚ç»™<code>record</code>å¢åŠ <code>parent</code>å±æ€§æ˜¯å› ä¸ºæ–¹ä¾¿åé¢çˆ¶å­ç»„ä»¶é€’å½’æ¸²æŸ“ã€‚</p>
<p><code>match</code> å®ç°å®Œäº†ï¼Œå°±æ”¹å®ç°ä¸‹<code>addRoute</code>ã€‚é‚£ä¹ˆ<code>addRoute</code>åˆè¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿå…¶å®éå¸¸çš„ç®€å•ï¼Œå°±æ˜¯ç»™<code>pathList</code> <code>pathMap</code>å¢åŠ <code>routes</code>å¯¹è±¡ç½¢äº†ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¼€å§‹åŠ¨æ‰‹å§ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-matcher.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addRoute</span>(<span class="params">routes</span>) </span>&#123;</span><br><span class="line">  createRouteMap(routes, pathList, pathMap);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šå‘ç°è¿™é‡Œçš„<code>createRouteMap</code>å¢åŠ äº†2ä¸ªå‚æ•°ï¼Œæ‰€ä»¥<code>createRouteMap</code>æ–¹æ³•å°±éœ€è¦å»å…¼å®¹äº†ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¼€å§‹åŠ¨æ‰‹å§ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-route-map.js</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRouteMap</span>(<span class="params">routes, oldPathList, oldPathMap</span>) </span>&#123;</span><br><span class="line">  - <span class="keyword">const</span> pathList = [];</span><br><span class="line">  + <span class="keyword">const</span> pathList = oldPathList || [];</span><br><span class="line">  - <span class="keyword">const</span> pathMap =<span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  + <span class="keyword">const</span> pathMap = oldPathMap || <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦å¯¹åŸå…ˆåˆ›å»º<code>pathList</code> <code>pathMap</code>å¯¹è±¡è¿›è¡Œå…¼å®¹å³å¯ã€‚</p>
<h3 id="History"><a href="#History" class="headerlink" title="History"></a>History</h3><p><code>constructor</code>ä¸­çš„<code>matcher</code>å¯¹è±¡åˆ›å»ºè®²å®Œä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®²è®²<code>constructor</code>ä¸­çš„<code>HashHistory</code>ã€‚</p>
<p><code>HashHistory</code>è¯¥æ€ä¹ˆå®ç°ï¼Ÿ<code>new HashHistory</code>ååšäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å› ä¸º<code>history</code>æ¨¡å¼æœ‰å¤šç§ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª<code>base</code>ç‰ˆçš„<code>history</code>ï¼Œç„¶å<code>HashHistory</code>åŸºäºè¿™ä¸ªåŸºç±»è¿›è¡Œæ‰©å±•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// history/base.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> History <span class="keyword">from</span> <span class="string">'./base'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HashHistory</span> <span class="keyword">extends</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(router) &#123;</span><br><span class="line">    <span class="keyword">super</span>(router);</span><br><span class="line">    <span class="keyword">this</span>.router = router;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p><code>VueRouter</code>å®ä¾‹ä¸­çš„<code>init</code>æ–¹æ³•æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å‘¢ï¼Ÿåœ¨<code>install</code>æŒ‚è½½çš„æ—¶å€™è°ƒç”¨ã€‚é‚£ä¹ˆæˆ‘ä»¬å†å»å®Œå–„ä¸‹<code>install</code>æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// install.js</span></span><br><span class="line"><span class="keyword">const</span> install = <span class="function">(<span class="params">Vue</span>) =&gt;</span> &#123;</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.$options.router) &#123;</span><br><span class="line">        <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>._router = <span class="keyword">this</span>.$options.router;</span><br><span class="line">        + <span class="keyword">this</span>._router.init()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span>.$parent &amp;&amp; <span class="keyword">this</span>.$parent._routerRoot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠ å·ä½ç½®å°±æ˜¯æˆ‘æ·»åŠ çš„ä»£ç ã€‚è°ƒç”¨ä¸‹<code>init</code>åˆå§‹åŒ–ä¸‹<code>VueRouter</code></p>
<p>é‚£ä¹ˆ<code>init</code>æ–¹æ³•ä¸­åšäº†å“ªäº›äº‹æƒ…å‘¢ï¼Ÿ</p>
<ul>
<li>æŒ‚è½½å½“å‰<code>url</code>å¯¹åº”çš„è·¯ç”±ç»„ä»¶</li>
<li>ç›‘å¬è·¯ç”±çš„å˜åŒ–ï¼ˆ<code>hashchange</code>ç­‰äº‹ä»¶ï¼‰</li>
</ul>
<p>è¯ä¸å¤šè¯´ï¼Œè¿›å…¥ç¼–ç æ¨¡å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue-router/index.js</span></span><br><span class="line"><span class="keyword">import</span> HashHistory <span class="keyword">from</span> <span class="string">'./history/hash'</span>;</span><br><span class="line"><span class="keyword">import</span> install <span class="keyword">from</span> <span class="string">'./install'</span>;</span><br><span class="line"><span class="keyword">import</span> createMatcher <span class="keyword">from</span> <span class="string">'./create-matcher'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  init(app) &#123;</span><br><span class="line">    <span class="keyword">const</span> history = <span class="keyword">this</span>.history;</span><br><span class="line">    <span class="keyword">const</span> setupListener = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      history.setupListener();</span><br><span class="line">    &#125;;</span><br><span class="line">    history.transitionTo(history.getCurrentLocation(), setupListener);</span><br><span class="line">    history.listen(<span class="function">(<span class="params">route</span>) =&gt;</span> &#123;</span><br><span class="line">      app._route = route;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="init-å“ªé‡Œè°ƒç”¨"><a href="#init-å“ªé‡Œè°ƒç”¨" class="headerlink" title="init å“ªé‡Œè°ƒç”¨"></a>init å“ªé‡Œè°ƒç”¨</h4><p>è¿™ä¸ª<code>init</code>ä¼šåœ¨å“ªé‡Œè°ƒç”¨å‘¢ï¼Ÿå½“ç„¶æ˜¯å®‰è£…çš„æ—¶å€™è°ƒç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨<code>install</code>çš„æ—¶å€™åŠ ä¸Š<code>init</code>çš„è°ƒç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> install = <span class="function">(<span class="params">Vue</span>) =&gt;</span> &#123;</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.$options.router) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">this</span>._router.init(<span class="keyword">this</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p><code>init</code>ä¸ºä»€ä¹ˆè¦ä¼ å…¥æ ¹å®ä¾‹å‘¢ï¼Ÿå› ä¸ºéœ€è¦ç›‘å¬å½“å‰<code>url</code>å¯¹åº”çš„è·¯ç”±å˜åŒ–ã€‚å½“ä»–å˜åŒ–ä¹‹åï¼Œä¼šä¸»åŠ¨å°†æ ¹å®ä¾‹çš„<code>_route</code>èµ‹å€¼æˆå½“å‰çš„æ ¹è·¯ç”±ã€‚é‚£æ ¹å®ä¾‹çš„<code>_route</code>å“ªæ¥çš„å‘¢ï¼Ÿå¯èƒ½æœ‰äººå¿˜è®°äº†ã€‚å¯ä»¥ç¿»åˆ°ä¸Šé¢<code>install</code>çš„ç« èŠ‚ï¼Œé‚£é‡Œè®²è¿‡äº†ã€‚</p>
<h4 id="initä¸­åšäº†å“ªäº›å·¥ä½œ"><a href="#initä¸­åšäº†å“ªäº›å·¥ä½œ" class="headerlink" title="initä¸­åšäº†å“ªäº›å·¥ä½œ"></a>initä¸­åšäº†å“ªäº›å·¥ä½œ</h4><h5 id="transitionTo"><a href="#transitionTo" class="headerlink" title="transitionTo"></a>transitionTo</h5><p><code>init</code>ä¸­è°ƒç”¨äº†<code>history</code>ä¸­çš„<code>transitionTo</code>,é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿç”¨äºè·¯ç”±çš„è·³è½¬ï¼Œæ ¹æ®ä¼ å…¥çš„<code>path</code>ä»<code>routeMap</code>ä¸­ç­›é€‰å‡ºå¯¹åº”çš„<code>route</code>ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè§¦å‘ä¸‹é¢è®²åˆ°çš„<code>listen</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•è§¦å‘åï¼Œä¼šä¿®æ”¹æ ¹å®ä¾‹çš„<code>_route</code>ã€‚ä¿®æ”¹ä¹‹åï¼Œ<code>router-view</code>å°±ä¼šå“åº”å¼çš„æ”¹å˜ï¼Œä»¥è¾¾åˆ°åˆ·æ–°è·¯ç”±æ¸²æŸ“é¡µé¢çš„ç›®çš„ã€‚å› ä¸ºè°ƒç”¨<code>transitionTo</code>æ–¹æ³•ä¼šæœ‰å¤šç§é€”å¾„ã€‚ä¸€ç§æ˜¯ä¸»åŠ¨è°ƒç”¨<code>push</code>æ–¹æ³•ç­‰ï¼Œéœ€è¦ä¸»åŠ¨ä¿®æ”¹<code>hash</code>å€¼ï¼Œä¸€ç§æ˜¯é¡µé¢åˆå§‹åŒ–è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™åˆéœ€è¦ç›‘å¬<code>hashchange</code>ç­‰äº‹ä»¶ï¼Œæ‰€ä»¥<code>transitionTo</code>å¢åŠ ç¬¬äºŒä¸ªå‚æ•°ç”¨äºå›è°ƒã€‚è¿™æ ·æ¯ä¸ªè°ƒç”¨<code>transitionTo</code>åï¼Œå¯æ‰§è¡Œè‡ªå·±çš„é€»è¾‘ã€‚</p>
<p>è¯ä¸å¤šè¯´ä¸Šä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// history/base.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(router) &#123;</span><br><span class="line">    + <span class="keyword">this</span>.router = router</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  + transitionTo(location, callback) &#123;</span><br><span class="line">  +  <span class="keyword">const</span> r = <span class="keyword">this</span>.router.match(location)</span><br><span class="line">  +  <span class="built_in">console</span>.log(r)</span><br><span class="line">  +  callback &amp;&amp; callback()</span><br><span class="line">  + &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ç®€çŸ­çš„ä»£ç æ˜¯ä¸æ˜¯å°±å®ç°äº†ä¸Šé¢æè¿°ä¸­çš„å‡ ä¸ªåŠŸèƒ½äº†ã€‚<br>è¿˜æœ‰ä¸¤ç‚¹åŠŸèƒ½æ²¡å®ç°ã€‚</p>
<ul>
<li>æ€ä¹ˆå“åº”å¼åˆ·æ–°</li>
<li>æ€ä¹ˆå®ç°åŒ¹é…è·¯ç”±ï¼ˆ<code>match</code>)</li>
</ul>
<p>æˆ‘ä»¬å…ˆæ¥è®²<strong>æ€ä¹ˆå“åº”å¼åˆ·æ–°</strong>é‚£ä¹ˆæ€æ ·æ‰èƒ½å®ç°<code>router-view</code>å“åº”å¼çš„åˆ·æ–°å‘¢ï¼Ÿæˆ‘ä»¬æ ¹æ®å€’æ¨çš„æ¨¡å¼ï¼Œ<code>router-view</code>æ˜¯æ ¹æ®æ ¹å®ä¾‹çš„<code>_route</code>åšåˆ·æ–°çš„ã€‚æ‰€ä»¥éœ€è¦å¢åŠ ä¸ª<code>current</code>å¯¹è±¡ç”¨æ¥è¡¨ç¤ºå½“å‰è·¯ç”±ã€‚ä¸Šä»£ç ğŸ¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// history/base.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(router) &#123;</span><br><span class="line">    <span class="keyword">this</span>.router = router</span><br><span class="line">    + <span class="keyword">this</span>.current = createRoute(<span class="literal">null</span>, &#123;</span><br><span class="line">    +  path: <span class="string">'/'</span></span><br><span class="line">    + &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  transitionTo(location, callback) &#123;</span><br><span class="line">    <span class="keyword">const</span> r = <span class="keyword">this</span>.router.match(location)</span><br><span class="line">    + <span class="keyword">this</span>.current = r</span><br><span class="line">    callback &amp;&amp; callback()</span><br><span class="line">    <span class="built_in">console</span>.log(r)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯æ˜¯å…‰è®¾ç½®<code>current</code>è¿˜ä¸èƒ½å®ç°<code>router-view</code>å“åº”å¼åˆ·æ–°ã€‚å› ä¸º<code>_route-view</code>æ˜¯æ ¹æ®<code>$route</code>åšå“åº”å¼çš„ã€‚è¿˜è®°å¾—åœ¨<code>install</code>çš„æ—¶å€™è®¾ç½®è¿‡<code>$route</code>å—ï¼Ÿæˆ‘ä»¬å°†å®ƒä¿®æ”¹ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// install.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> install = <span class="function">(<span class="params">Vue</span>) =&gt;</span> &#123;</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.$options.router) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">this</span>._router.init(<span class="keyword">this</span>)</span><br><span class="line">        + Vue.util.defineReactive(<span class="keyword">this</span>, <span class="string">'_route'</span>, <span class="keyword">this</span>._router.history.current);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span>.$parent &amp;&amp; <span class="keyword">this</span>.$parent._routerRoot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$route'</span>, &#123;</span><br><span class="line">    <span class="keyword">get</span>() &#123;</span><br><span class="line">      - <span class="keyword">return</span> <span class="string">'this is $route'</span>;</span><br><span class="line">      + <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._route;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ · æˆ‘ä»¬ä¸€æ—¦ä¿®æ”¹<code>current</code>ï¼Œé¡µé¢çš„<code>$route</code>å°±ä¼šå“åº”å¼æ›´æ–°äº†ã€‚åˆ·æ–°ä¸‹é¡µé¢è¯•è¯•çœ‹å§ğŸ¶ã€‚</p>
<p>ç«Ÿç„¶æŠ¥é”™äº†ã€‚æç¤º<code>createRoute is not defined</code>ã€‚</p>
<p>æŠ„ä¸‹ä¸Šé¢è´´è¿‡çš„ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// history/base.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(router) &#123;</span><br><span class="line">    <span class="keyword">this</span>.router = router</span><br><span class="line">    + <span class="keyword">this</span>.current = createRoute(<span class="literal">null</span>, &#123;</span><br><span class="line">    +  path: <span class="string">'/'</span></span><br><span class="line">    + &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  transitionTo(location, callback) &#123;</span><br><span class="line">    <span class="keyword">const</span> r = <span class="keyword">this</span>.router.match(location)</span><br><span class="line">    + <span class="keyword">this</span>.current = r</span><br><span class="line">    callback &amp;&amp; callback()</span><br><span class="line">    <span class="built_in">console</span>.log(r)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥è®²è®²<code>createRoute</code>çš„ä½œç”¨ã€‚ä»–çš„ä½œç”¨æ˜¯å°†åŒ¹é…åˆ°çš„<code>route</code>è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸ªåŒ…å«<code>path</code>ã€<code>matched</code>å­—æ®µã€‚<code>matched</code>å­—æ®µåŒ…å«äº†ï¼Œä»åŒ¹é…åˆ°çš„ä¸€çº§è·¯ç”±ä¸€ç›´åˆ°æœ€åä¸€çº§è·¯ç”±ã€‚<code>router-view</code>ä¹Ÿæ˜¯æ ¹æ®è¿™ä¸€æ•°ç»„è¿›è¡Œçˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶çš„æ¸²æŸ“çš„ã€‚<code>match</code>æ–¹æ³•ä¸­ä¹Ÿç”¨åˆ°çš„è¿™ä¸ªæ–¹æ³•ã€‚ä¸‹é¢å†è®²<code>match</code>æ–¹æ³•ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®ç°<code>createRoute</code>æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// history/base.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createRoute</span>(<span class="params">record, location</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> matched = [];</span><br><span class="line">  <span class="keyword">while</span> (record) &#123;</span><br><span class="line">    matched.unshift(record);</span><br><span class="line">    record = record.parent;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    matched,</span><br><span class="line">    ...location,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ä¸ªå‚æ•°<code>record</code>å…¶å®å°±æ˜¯ä¸Šæ–‡<code>createRouteMap</code>ä¸­<code>addRouteRecord</code>ä½¿ç”¨åˆ°çš„<code>record</code>ã€‚å…¶ä¸­åŒ…å«äº†<code>parent</code>å­—æ®µå°±æ˜¯åœ¨è¿™ä¸ªæ—¶å€™ç”¨åˆ°çš„ã€‚æ‰€ä»¥<code>/about/a</code>å°±å¯ä»¥ç”Ÿæˆ<code>matched: [{path: &#39;/about&#39;, component: componentAbout}, {path: &#39;/about/a&#39;, component: componentAboutA}]</code>äº†ã€‚å†æ¬¡æé†’ä¸‹ï¼Œ<code>matched</code>ç”¨äº<code>router-view</code>çš„å±‚å±‚æ¸²æŸ“ã€‚è¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç ğŸ¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue-router/index.js</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="keyword">this</span>.matcher = createMatcher(options.routes);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  match(location) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.matcher.match(location);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æé†’ä¸‹ï¼Œè¿™é‡Œçš„<code>matcher</code>ä¸Šé¢è®²è¿‡äº†ã€‚ç”¨æ¥è¿”å›<code>match</code>è·Ÿ<code>addRoute</code>æ–¹æ³•ã€‚</p>
<p>ç„¶åå†å®Œå–„ä¸‹ä¸Šé¢å†™è¿‡çš„<code>createMatcher</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create-matcher.js</span></span><br><span class="line">+ <span class="keyword">import</span> &#123; createRoute &#125; <span class="keyword">from</span> <span class="string">'./history/base'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMatcher</span>(<span class="params">routes</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; pathList, pathMap &#125; = createRouteMap(routes);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">match</span>(<span class="params">locaiton</span>) </span>&#123;</span><br><span class="line">    - <span class="keyword">return</span> pathMap[locaiton];</span><br><span class="line">    + <span class="keyword">return</span> createRoute(pathMap[locaiton], &#123;</span><br><span class="line">    +   path: locaiton,</span><br><span class="line">    + &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹ç€å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œå†åˆ·æ–°ä¸‹é¡µé¢ã€‚</p>
<p>æç¤º<code>history.setupListener is not a function</code></p>
<p>æˆ‘ä»¬å†æŠŠæ€ç»ªæ‹‰å›åˆ°<code>init</code>æ–¹æ³•ä¸­è°ƒç”¨çš„<code>history.setupListener</code></p>
<p><code>setupListener</code>å…¶å®éå¸¸çš„ç®€å•ï¼Œå°±æ˜¯æ·»åŠ ç›‘å¬äº‹ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HashHistory</span> <span class="keyword">extends</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(router) &#123;</span><br><span class="line">    <span class="keyword">super</span>(router);</span><br><span class="line">    <span class="keyword">this</span>.router = router;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getCurrentLocation() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.location.hash.slice(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  + setupListener() &#123;</span><br><span class="line">  +   <span class="built_in">window</span>.addEventListener(<span class="string">'hashchange'</span>, () =&gt; &#123;</span><br><span class="line">  +     <span class="keyword">this</span>.transitionTo(<span class="keyword">this</span>.getCurrentLocation());</span><br><span class="line">  +   &#125;);</span><br><span class="line">  + &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›‘å¬åˆ°<code>hashchange</code>åï¼Œä¸»åŠ¨è°ƒç”¨ä¸‹<code>transitionTo</code>å»åˆ‡æ¢è·¯ç”±ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å†åˆ·æ–°ä¸‹é¡µé¢ï¼ŒåˆæŠ¥é”™ excuse meï¼Ÿï¼Ÿï¼Ÿ</p>
<p>æç¤º: <code>TypeError: history.listen is not a function</code></p>
<h5 id="listen"><a href="#listen" class="headerlink" title="listen"></a>listen</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">this</span>.history = <span class="keyword">new</span> HashHistory(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  init(app) &#123;</span><br><span class="line">    <span class="keyword">const</span> history = <span class="keyword">this</span>.history;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    history.transitionTo(history.getCurrentLocation(), setupListener);</span><br><span class="line">    &gt; history.listen(<span class="function">(<span class="params">route</span>) =&gt;</span> &#123;</span><br><span class="line">    &gt;   app._route = route;</span><br><span class="line">    &gt; &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>init</code>ä¸­<code>history.listen</code>å…¶å®ä¹Ÿæ˜¯éå¸¸çš„ç®€å•ï¼Œå°±æ˜¯æ·»åŠ è®¢é˜…ã€‚å½“è°ƒç”¨<code>transitionTo</code>åï¼Œè§¦å‘ä¸‹è®¢é˜…çš„äº‹ä»¶ã€‚å¹¶ä¼ å…¥<code>location</code>å¯¹åº”çš„<code>route</code>ã€‚è¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç ğŸ¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// history/base.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  transitionTo(location, callback) &#123;</span><br><span class="line">    <span class="keyword">const</span> r = <span class="keyword">this</span>.router.match(location);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">this</span>.cb &amp;&amp; <span class="keyword">this</span>.cb(r)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  listen(cb) &#123;</span><br><span class="line">    <span class="keyword">this</span>.cb</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™å†åˆ·æ–°ä¸‹é¡µé¢ã€‚æ‰“å°ä¸‹<code>.vue</code>æ–‡ä»¶é‡Œçš„<code>this.$route</code>çœ‹äº†ä¸‹å¥½åƒæ²¡é—®é¢˜ğŸ˜†ã€‚</p>
<p>ä¸Šæ–‡è¯´è¿‡<code>router-view</code>æ˜¯æ ¹æ®<code>$route</code>å±‚å±‚æ¸²æŸ“çš„ï¼Œæ—¢ç„¶<code>$route</code>éƒ½å†‡é—®é¢˜äº†ï¼Œé‚£å°±å¼€å§‹ç¼–å†™<code>router-view</code>ç»„ä»¶å§ã€‚</p>
<h3 id="router-view"><a href="#router-view" class="headerlink" title="router-view"></a>router-view</h3><p>åœ¨æˆ‘çœ‹<code>router-view</code>æºç ä¹‹å‰ï¼Œæˆ‘æ ¹æœ¬<code>router-view</code>æ€ä¹ˆå®ç°ã€‚åŸæ¥å®ƒæ˜¯æ ¹æ®<code>$route</code>çš„<code>matched</code>åŒ¹é…åˆ°çš„ç»„ä»¶è¿›è¡Œå±‚å±‚æ¸²æŸ“çš„ã€‚<br>ä¸¾ä¸ªğŸŒ°ï¼Œå°±ä¸¾ä¸Šé¢æ‰“å°å‡ºæ¥çš„<code>matched</code>æ¥è®²å¥½äº†ï¼Œ<code>app.vue</code>ä¸­çš„<code>router-view</code>ä¼šæ¸²æŸ“<code>matched</code>çš„ç¬¬ä¸€é¡¹ä¸­çš„<code>component</code>å¯¹åº”çš„<code>about.vue</code>ç»„ä»¶ï¼Œ<code>about.vue</code>ä¸­çš„<code>router-view</code>ä¼šæ¸²æŸ“<code>matched</code>ä¸­ç¬¬äºŒä¸ª<code>component</code>å¯¹åº”çš„<code>about/a</code>ç»„ä»¶ã€‚å¯èƒ½ä¸Šä»£ç æ›´ç®€å•æ˜“æ‡‚ğŸ¶,é‚£æˆ‘å°±å¼€å§‹å¼€å‘äº†ï¼ˆæœ¬æ–‡éƒ½æ˜¯è¾¹å¼€å‘è¾¹å†™æ–‡ç« çš„ï¼‰ã€‚</p>
<p><code>router-view</code>ç»„ä»¶æ˜¯ç”¨çš„å‡½æ•°å¼ç»„ä»¶ï¼Œå› ä¸º<a href="https://cn.vuejs.org/v2/guide/render-function.html#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6">å‡½æ•°å¼ç»„ä»¶</a>æ— çŠ¶æ€ (æ²¡æœ‰å“åº”å¼æ•°æ®)ï¼Œä¹Ÿæ²¡æœ‰å®ä¾‹ (æ²¡æœ‰ this ä¸Šä¸‹æ–‡)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/router-view.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  functional: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  render(h, &#123;parent, data&#125;) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(parent, <span class="string">'parent'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>install</code>ä¸­<code>rotuer-view</code>ç»„ä»¶å®šä¹‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// install.js</span></span><br><span class="line"><span class="keyword">import</span> RouterView <span class="keyword">from</span> <span class="string">'./components/router-view'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> install = <span class="function">(<span class="params">Vue</span>) =&gt;</span> &#123;</span><br><span class="line">  - Vue.component(<span class="string">'router-view'</span>, &#123;</span><br><span class="line">  -   render() &#123;</span><br><span class="line">  -     <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is router-view<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  -   &#125;,</span><br><span class="line">  - &#125;);</span><br><span class="line">  + Vue.component(<span class="string">'router-view'</span>, RouterView);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> install;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç å†™å®Œä¹‹åï¼Œå¥½åƒä¸€åˆ‡æ­£å¸¸ï¼Œæ‰“å°å‡ºæ¥ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚æ¥ä¸‹æ¥å°±æ ¹æ®æˆ‘ä¸Šé¢è¯´çš„ï¼Œä»–æ˜¯æ ¹æ®<code>$route.matched</code>æ¥æ¸²æŸ“çš„å»å®ç°å®ƒå§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  functional: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  render(h, &#123; parent, data &#125;) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(parent, <span class="string">'parent'</span>);</span><br><span class="line">    <span class="keyword">const</span> route = parent.$route;</span><br><span class="line">    <span class="keyword">let</span> depth = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ¸²æŸ“è¿‡ï¼Œå¦‚æœæ²¡æœ‰æ¸²æŸ“è¿‡ï¼Œå°±æ¸²æŸ“å¯¹åº”matchedé‡Œçš„ç»„ä»¶ï¼Œå¹¶å°†è¯¥ç»„ä»¶data.routerView = 1ã€‚ä»¥è¾¾åˆ°ä¸ä¼šé‡å¤æ¸²æŸ“ã€‚</span></span><br><span class="line">    <span class="keyword">while</span> (parent) &#123;</span><br><span class="line">      <span class="keyword">if</span> (parent.$vnode &amp;&amp; parent.$vnode.data.routerView) &#123;</span><br><span class="line">        depth++;</span><br><span class="line">      &#125;</span><br><span class="line">      parent = parent.$parent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    data.routerView = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> record = route.matched[depth];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!record) &#123;</span><br><span class="line">      <span class="keyword">return</span> h();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> h(record.component, data);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>while</code>çš„ä½œç”¨åˆ¤æ–­æ˜¯å¦æ¸²æŸ“è¿‡ï¼Œå¦‚æœæ²¡æœ‰æ¸²æŸ“è¿‡ï¼Œå°±æ¸²æŸ“å¯¹åº”matchedé‡Œçš„ç»„ä»¶ï¼Œå¹¶å°†è¯¥ç»„ä»¶data.routerView = 1ã€‚ä»¥è¾¾åˆ°ä¸ä¼šé‡å¤æ¸²æŸ“ã€‚åˆ·æ–°ä¸‹é¡µé¢çœ‹çœ‹å§ã€‚å¥½åƒå­é¡µé¢éƒ½å‡ºæ¥äº†ã€‚</p>
<h3 id="router-link"><a href="#router-link" class="headerlink" title="router-link"></a>router-link</h3><p><code>router-link</code>éå¸¸çš„ç®€å•ã€‚æˆ‘è¿™é‡Œå°±å®ç°ä¸‹æ¯”è¾ƒå¸¸è§çš„ä¸€äº›æ“ä½œã€‚æ¯”å¦‚å‚æ•°<code>tag</code>,<code>to</code>ç­‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    tag: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">'a'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> tag = <span class="keyword">this</span>.tag;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">tag</span>&gt;</span>&#123;this.$slots.default&#125;<span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æˆ‘è¿™é‡Œå…ˆå†™ä¸ªæ¯”è¾ƒç®€å•çš„æ¶å­ã€‚éå¸¸çš„ç®€å•å°†æ–‡å­—å±•ç¤ºåœ¨<code>tag</code>ä¸­</p>
<p>ç„¶åå†ä¿®æ”¹ä¸‹<code>install</code>ä¸­çš„å¼•å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// install.js</span></span><br><span class="line"><span class="keyword">import</span> RouterLink <span class="keyword">from</span> <span class="string">'./components/router-link'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> install = <span class="function">(<span class="params">Vue</span>) =&gt;</span> &#123;</span><br><span class="line">  - Vue.component(<span class="string">'router-link'</span>, &#123;</span><br><span class="line">  -   render() &#123;</span><br><span class="line">  -     <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is router-link<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  -   &#125;,</span><br><span class="line">  - &#125;);</span><br><span class="line">  + Vue.component(<span class="string">'router-link'</span>, RouterLink);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> install;</span><br></pre></td></tr></table></figure>

<p>åˆ·æ–°ä¸‹é¡µé¢è¯•è¯•ã€‚é¡µé¢ä¸€åˆ‡å±•ç¤ºæ­£å¸¸ğŸ¶ã€‚è¿™å°±å¤§åŠŸå‘Šæˆäº†å—ï¼Ÿå½“ç„¶æ²¡æœ‰å•¦ï¼Œè¿˜æœ‰<code>router-link</code>çš„ç‚¹å‡»äº‹ä»¶æ²¡å†™ï¼Œé‚£å°±å¼€å§‹åŠ¨æ‰‹å§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router-link.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    tag: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">'a'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    + to: &#123;</span><br><span class="line">    +   type: <span class="built_in">String</span>,</span><br><span class="line">    +   required: <span class="literal">true</span>,</span><br><span class="line">    + &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  + methods: &#123;</span><br><span class="line">  +   handler() &#123;</span><br><span class="line">  +     <span class="keyword">this</span>.$router.push(<span class="keyword">this</span>.to);</span><br><span class="line">  +   &#125;,</span><br><span class="line">  + &#125;,</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> tag = <span class="keyword">this</span>.tag;</span><br><span class="line">    - <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">tag</span>&gt;</span>&#123;this.$slots.default&#125;<span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span>;</span><br><span class="line">    + <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">tag</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handler&#125;</span>&gt;</span>&#123;this.$slots.default&#125;<span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç»™<code>tag</code>å¢åŠ ç‚¹å‡»äº‹ä»¶ã€‚æˆ‘ä¸Šé¢çš„ä¾‹å­å°†<code>to</code>å®šä¹‰æˆ<code>String</code>ç±»å‹äº†ã€‚å…¶å®è¿™ä¸ª<code>to</code>å¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚æˆ‘çš„ä¾‹å­åªè¦èƒ½ä½“ç°å‡º<code>router-link</code>çš„åŠŸèƒ½å°±è¡Œäº†ã€‚</p>
<p>æ¥ä¸‹æ¥åˆ·æ–°ä¸‹é¡µé¢è¯•è¯•çœ‹ã€‚</p>
<p>æŠ¥äº†ä¸ªé”™: <code>TypeError: this.$router.push is not a function</code></p>
<p>åŸæ¥æˆ‘<code>push</code>å¿˜è®°å†™äº†ã€‚é‚£å°±åœ¨<code>vue-router</code>å®ä¾‹ä¸­åŠ ä¸€ä¸ªå§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue-router/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">this</span>.history = <span class="keyword">new</span> HashHistory(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  + push(location) &#123;</span><br><span class="line">  +   <span class="keyword">this</span>.history.transitionTo(location, () =&gt; &#123;</span><br><span class="line">  +     <span class="built_in">window</span>.location.hash = location;</span><br><span class="line">  +   &#125;);</span><br><span class="line">  + &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨ä¸‹<code>history.transitionTo</code>è¿›è¡Œè·¯ç”±çš„åŒ¹é…æ›¿æ¢ï¼Œè§¦å‘<code>router-view</code>æ¸²æŸ“åï¼Œè¿˜æœ‰åœ¨å›è°ƒä¸­ä¸»åŠ¨ä¿®æ”¹ä¸‹<code>hash</code>åœ°å€ã€‚</p>
<p>åˆ·æ–°ä¸‹é¡µé¢ã€‚ä¸€åˆ‡æ­£å¸¸ã€‚å†ç‚¹å‡»<code>router-link</code>æ ‡ç­¾ã€‚emmmm ä¸€åˆ‡æ­£å¸¸ã€‚ï¼ˆé‡å¤ç‚¹å‡»ä¸€ä¸ªlinkè·³è½¬æ²¡æœ‰å¤„ç†ï¼Œæˆ‘å°±ä¸å¤„ç†ã€‚æˆ‘è§‰å¾—æ²¡æœ‰å¿…è¦ï¼Œæˆ‘çš„ç›®çš„å°±æ˜¯èƒ½è¡¨è¾¾æˆ‘å¯¹routerçš„ç†è§£å°±å¤Ÿäº†ï¼‰</p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>éå¸¸æ„Ÿè°¢ä½ èƒ½è¯»å®Œè¿™ç¯‡æ–‡ç« ã€‚æˆ‘å·²ç»éå¸¸åŠªåŠ›å†™è¿™ç¯‡æ–‡ç« äº†ï¼ˆvue-routerå†™äº†ä¸‰éæ‰å¼€å§‹å†™æ–‡ç« çš„ï¼‰ã€‚ä½†æ˜¯è¯»èµ·æ¥å¥½åƒè¿˜æ˜¯ä¸æ˜¯å¾ˆé¡ºã€‚</p>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/blog/tags/vue-router/" rel="tag">vue-router</a>, <a class="has-link-grey -link" href="/blog/tags/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0/" rel="tag">æºç å®ç°</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Ÿæ‰“èµä¸€ä¸‹ä½œè€…å§</h3>
        <div class="buttons is-centered">
            
                
<a class="button is-info donate">
    <span class="icon is-small">
        <i class="fab fa-alipay"></i>
    </span>
    <span>æ”¯ä»˜å®</span>
    <div class="qrcode"><img src="https://s1.ax1x.com/2020/03/29/GVxai6.png" alt="æ”¯ä»˜å®"></div>
</a>

                
                
<a class="button is-success donate">
    <span class="icon is-small">
        <i class="fab fa-weixin"></i>
    </span>
    <span>å¾®ä¿¡</span>
    <div class="qrcode"><img src="https://s1.ax1x.com/2020/03/29/GVzAfK.png" alt="å¾®ä¿¡"></div>
</a>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/blog/2020/04/02/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8BVuex/">
                <span class="level-item">æºç å®ç°ç³»åˆ—ä¹‹Vuex</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">è¯„è®º</h3>
        
<div id="valine-thread" class="content"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>
<script>
    new Valine({
        el: '#valine-thread' ,
        notify: false,
        verify: false,
        app_id: '6wph3PoS8fVVU86A0GoJPvbu-gzGzoHsz',
        app_key: 'N6A70pqCwTUE03HESBBPHAIu',
        placeholder: 'è¯·è¾“å…¥'
    });
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/blog/images/avatar.png" alt="zhouatie">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        zhouatie
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        è®°å½•ç‚¹æ»´
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>æ­å·</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        æ–‡ç« 
                    </p>
                    <a href="/blog/archives">
                        <p class="title has-text-weight-normal">
                            29
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        åˆ†ç±»
                    </p>
                    <a href="/blog/categories">
                        <p class="title has-text-weight-normal">
                            3
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        æ ‡ç­¾
                    </p>
                    <a href="/blog/tags">
                        <p class="title has-text-weight-normal">
                            19
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/zhouatie" target="_blank" rel="noopener">
                å…³æ³¨æˆ‘</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Github" href="https://github.com/zhouatie">
                
                <i class="fab fa-github"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            é“¾æ¥
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/zhouatie" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">zhouatie</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                åˆ†ç±»
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/blog/categories/%E5%89%8D%E7%AB%AF/">
            <span class="level-start">
                <span class="level-item">å‰ç«¯</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">27</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/blog/categories/%E5%B7%A5%E5%85%B7/">
            <span class="level-start">
                <span class="level-item">å·¥å…·</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/blog/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">
            <span class="level-start">
                <span class="level-item">æŒç»­é›†æˆ</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            æ ‡ç­¾äº‘
        </h3>
        <a href="/blog/tags/cache/" style="font-size: 10px;">cache</a> <a href="/blog/tags/docker/" style="font-size: 15px;">docker</a> <a href="/blog/tags/fanyi/" style="font-size: 10px;">fanyi</a> <a href="/blog/tags/formdata/" style="font-size: 10px;">formdata</a> <a href="/blog/tags/http/" style="font-size: 10px;">http</a> <a href="/blog/tags/image-preview/" style="font-size: 10px;">image-preview</a> <a href="/blog/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/blog/tags/js/" style="font-size: 20px;">js</a> <a href="/blog/tags/nginx/" style="font-size: 12.5px;">nginx</a> <a href="/blog/tags/node/" style="font-size: 12.5px;">node</a> <a href="/blog/tags/plugin/" style="font-size: 20px;">plugin</a> <a href="/blog/tags/promise/" style="font-size: 10px;">promise</a> <a href="/blog/tags/react/" style="font-size: 10px;">react</a> <a href="/blog/tags/socket-io/" style="font-size: 10px;">socket.io</a> <a href="/blog/tags/vue/" style="font-size: 15px;">vue</a> <a href="/blog/tags/vue-router/" style="font-size: 10px;">vue-router</a> <a href="/blog/tags/vuex/" style="font-size: 10px;">vuex</a> <a href="/blog/tags/webpack/" style="font-size: 17.5px;">webpack</a> <a href="/blog/tags/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0/" style="font-size: 12.5px;">æºç å®ç°</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            æœ€æ–°æ–‡ç« 
        </h3>
        
        <article class="media">
            
            <a href="/blog/2020/04/12/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8Bvue-router/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/blog/images/thumbnail.svg" alt="æºç å®ç°ç³»åˆ—ä¹‹vue-router">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-11T18:49:23.000Z">2020-04-12</time></div>
                    <a href="/blog/2020/04/12/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8Bvue-router/" class="title has-link-black-ter is-size-6 has-text-weight-normal">æºç å®ç°ç³»åˆ—ä¹‹vue-router</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2020/04/02/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8BVuex/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/04/03/Gt2PbQ.jpg" alt="æºç å®ç°ç³»åˆ—ä¹‹Vuex">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-02T15:45:02.000Z">2020-04-02</time></div>
                    <a href="/blog/2020/04/02/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8BVuex/" class="title has-link-black-ter is-size-6 has-text-weight-normal">æºç å®ç°ç³»åˆ—ä¹‹Vuex</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2020/04/02/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAjenkins/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/04/02/GGPu79.jpg" alt="dockerä»é›¶æ­å»ºjenkins">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-01T20:16:41.000Z">2020-04-02</time></div>
                    <a href="/blog/2020/04/02/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAjenkins/" class="title has-link-black-ter is-size-6 has-text-weight-normal">dockerä»é›¶æ­å»ºjenkins</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">æŒç»­é›†æˆ</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2019/11/25/%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/03/30/GelXJP.png" alt="å‘½ä»¤è¡Œç¿»è¯‘æ’ä»¶">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-24T17:55:49.000Z">2019-11-25</time></div>
                    <a href="/blog/2019/11/25/%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6/" class="title has-link-black-ter is-size-6 has-text-weight-normal">å‘½ä»¤è¡Œç¿»è¯‘æ’ä»¶</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2019/09/12/%E6%89%8B%E5%86%99Promise/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/03/30/Gelose.png" alt="æ‰‹å†™Promise">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-11T17:54:02.000Z">2019-09-12</time></div>
                    <a href="/blog/2019/09/12/%E6%89%8B%E5%86%99Promise/" class="title has-link-black-ter is-size-6 has-text-weight-normal">æ‰‹å†™Promise</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            å½’æ¡£
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">å››æœˆ 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">åä¸€æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">ä¹æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">ä¸ƒæœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">äº”æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">å››æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">ä¸‰æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">åä¸€æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">ä¹æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">å…«æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">å››æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">ä¸‰æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">äºŒæœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">ä¸€æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                æ ‡ç­¾
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/cache/">
                        <span class="tag">cache</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/docker/">
                        <span class="tag">docker</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/fanyi/">
                        <span class="tag">fanyi</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/formdata/">
                        <span class="tag">formdata</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/http/">
                        <span class="tag">http</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/image-preview/">
                        <span class="tag">image-preview</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/jenkins/">
                        <span class="tag">jenkins</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/js/">
                        <span class="tag">js</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/nginx/">
                        <span class="tag">nginx</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/node/">
                        <span class="tag">node</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/plugin/">
                        <span class="tag">plugin</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/promise/">
                        <span class="tag">promise</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/react/">
                        <span class="tag">react</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/socket-io/">
                        <span class="tag">socket.io</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/vue/">
                        <span class="tag">vue</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/vue-router/">
                        <span class="tag">vue-router</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/vuex/">
                        <span class="tag">vuex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/webpack/">
                        <span class="tag">webpack</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0/">
                        <span class="tag">æºç å®ç°</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            æœ€æ–°æ–‡ç« 
        </h3>
        
        <article class="media">
            
            <a href="/blog/2020/04/12/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8Bvue-router/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/blog/images/thumbnail.svg" alt="æºç å®ç°ç³»åˆ—ä¹‹vue-router">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-11T18:49:23.000Z">2020-04-12</time></div>
                    <a href="/blog/2020/04/12/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8Bvue-router/" class="title has-link-black-ter is-size-6 has-text-weight-normal">æºç å®ç°ç³»åˆ—ä¹‹vue-router</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2020/04/02/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8BVuex/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/04/03/Gt2PbQ.jpg" alt="æºç å®ç°ç³»åˆ—ä¹‹Vuex">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-02T15:45:02.000Z">2020-04-02</time></div>
                    <a href="/blog/2020/04/02/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%B3%BB%E5%88%97%E4%B9%8BVuex/" class="title has-link-black-ter is-size-6 has-text-weight-normal">æºç å®ç°ç³»åˆ—ä¹‹Vuex</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2020/04/02/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAjenkins/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/04/02/GGPu79.jpg" alt="dockerä»é›¶æ­å»ºjenkins">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-01T20:16:41.000Z">2020-04-02</time></div>
                    <a href="/blog/2020/04/02/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAjenkins/" class="title has-link-black-ter is-size-6 has-text-weight-normal">dockerä»é›¶æ­å»ºjenkins</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">æŒç»­é›†æˆ</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2019/11/25/%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/03/30/GelXJP.png" alt="å‘½ä»¤è¡Œç¿»è¯‘æ’ä»¶">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-24T17:55:49.000Z">2019-11-25</time></div>
                    <a href="/blog/2019/11/25/%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6/" class="title has-link-black-ter is-size-6 has-text-weight-normal">å‘½ä»¤è¡Œç¿»è¯‘æ’ä»¶</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/blog/2019/09/12/%E6%89%8B%E5%86%99Promise/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://s1.ax1x.com/2020/03/30/Gelose.png" alt="æ‰‹å†™Promise">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-11T17:54:02.000Z">2019-09-12</time></div>
                    <a href="/blog/2019/09/12/%E6%89%8B%E5%86%99Promise/" class="title has-link-black-ter is-size-6 has-text-weight-normal">æ‰‹å†™Promise</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            å½’æ¡£
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">å››æœˆ 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">åä¸€æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">ä¹æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">ä¸ƒæœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">äº”æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">å››æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">ä¸‰æœˆ 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">åä¸€æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">ä¹æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">å…«æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">å››æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">ä¸‰æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">äºŒæœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/blog/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">ä¸€æœˆ 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                æ ‡ç­¾
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/cache/">
                        <span class="tag">cache</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/docker/">
                        <span class="tag">docker</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/fanyi/">
                        <span class="tag">fanyi</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/formdata/">
                        <span class="tag">formdata</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/http/">
                        <span class="tag">http</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/image-preview/">
                        <span class="tag">image-preview</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/jenkins/">
                        <span class="tag">jenkins</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/js/">
                        <span class="tag">js</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/nginx/">
                        <span class="tag">nginx</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/node/">
                        <span class="tag">node</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/plugin/">
                        <span class="tag">plugin</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/promise/">
                        <span class="tag">promise</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/react/">
                        <span class="tag">react</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/socket-io/">
                        <span class="tag">socket.io</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/vue/">
                        <span class="tag">vue</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/vue-router/">
                        <span class="tag">vue-router</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/vuex/">
                        <span class="tag">vuex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/webpack/">
                        <span class="tag">webpack</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/blog/tags/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0/">
                        <span class="tag">æºç å®ç°</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/blog/">
                
                    <img src="/blog/images/logo.svg" alt="æºç å®ç°ç³»åˆ—ä¹‹vue-router" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 zhouatie&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhouatie">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'http://zhouatie.github.io/blog',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/blog/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/blog/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/blog/js/back-to-top.js" defer></script>














<script src="/blog/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'æ–‡ç« ',
                PAGES: 'é¡µé¢',
                CATEGORIES: 'åˆ†ç±»',
                TAGS: 'æ ‡ç­¾',
                UNTITLED: '(æ— æ ‡é¢˜)',
            },
            CONTENT_URL: '/blog/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/blog/js/insight.js" defer></script>
<link rel="stylesheet" href="/blog/css/search.css">
<link rel="stylesheet" href="/blog/css/insight.css">
    
</body>
</html>